---
title: deploy
---

import Algorithm from '../src/components/Algorithm';
import Api from '../src/components/Api';
import InnerHTML from '../src/components/InnerHTML';
import OptionAliasesInline from '../src/components/OptionAliasesInline';

import carlin from '../.docusaurus/carlin/default/carlin.json';

export const DefaultTemplatePaths = () => {
  return (
    <ol>
      {carlin.defaultTemplatePaths.map((path) => (
        <li key={path}>
          <code>{path}</code>,
        </li>
      ))}
    </ol>
  );
};

## Overview

```bash
carlin deploy
```

This command deploys the cloud resources. **carlin** takes the template defined by <OptionAliasesInline options={carlin.options.deploy} option="template-path" /> option, whose defaults values are:

<DefaultTemplatePaths />

and deploy accordingly to the following algorithm:

:::note Algorithm

<Algorithm algorithm={carlin.comments.deploy} />

:::

### Stack Name

**carlin** creates automatically the [CloudFormation stack name](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-using-console-create-stack-parameters.html), unless it is already specified at the <OptionAliasesInline options={carlin.options.deploy} option="stack-name" /> option.
This name is very important because it'll track the deployment when a update or a delete is performed.

:::caution

<InnerHTML html={carlin.comments.stackNameWarning} />
::::

<InnerHTML html={carlin.comments.stackName} />

## Lambda

If <code children={carlin.options.deploy['lambda-input'].default} /> or any file defined by <OptionAliasesInline options={carlin.options.deploy} option="lambda-input" /> exists, **carlin** will deploy with the Lambda algorithm.

:::note Algorithm

<Algorithm algorithm={carlin.comments.deployCloudFormationDeployLambdaCode} />
:::

The build and upload algorithm is:

:::note Algorithm

<Algorithm algorithm={carlin.comments.deployLambdaCode} />
:::

## Destroy

To destroy the stack, just pass the option `destroy` to the deploy command:

```
carlin deploy --destroy
```

When this option exists, the following algorithm is executed:

:::note Algorithm

<Algorithm algorithm={carlin.comments.destroy} />
:::

:::danger
This operation is irreversible. You must pay attention because you may destroy resources that contains your App data, like DynamoDB, using this command.
To overcome this problem, destroy will only delete the resources if termination protetion isn't enabled and if `environment` isn't defined.
:::

## Examples

- Change the CloudFormation template path:

```bash
carlin deploy -t src/cloudformation.template1.yml
```

- Set environment:

```bash
carlin deploy -e Production
```

- Lambda exists:

```bash
carlin deploy --lambda-input src/lambda/index.ts --lambda-externals momentjs
```

## API

<Api api={carlin.api.deploy} />
